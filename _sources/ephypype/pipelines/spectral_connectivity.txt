.. _spectral_connectivity:

Connectivity pipeline
=====================

The connectivity pipeline wraps spectral connectivity functions of |MNE python|, as well as |plot_connectivity_circle|
function to visualize the connectivity matrix as a circular graph.

.. |MNE python| raw:: html

   <a href="http://martinos.org/mne/stable/auto_examples/index.html#connectivity-analysis-examples" target="_blank">MNE python</a>
   
.. |plot_connectivity_circle| raw:: html

   <a href="http://martinos.org/mne/dev/generated/mne.viz.plot_connectivity_circle.html#mne.viz.plot_connectivity_circle" target="_blank">plot_connectivity_circle</a>

The input data can be 

* the output of :ref:`preproc_meeg` or :ref:`source_reconstruction` (**.npy** format) or
* an epoched or raw data (**.fif** format)
* a time series matrix in sensor or source space (**.mat** format)

The outputs is the **spectral connectivty matrix in .npy format** stored in the workflow directory
and can be used as input of the |create_pipeline_conmat_to_graph_density| performing graph analysis
on the computed connectivity matrix.

.. |create_pipeline_conmat_to_graph_density| raw:: html

   <a href="http://davidmeunier79.github.io/neuropype_graph/conmat_to_graph.html#create-pipeline-conmat-to-graph-density" target="_blank">create_pipeline_conmat_to_graph_density</a>


The connectivity pipeline is implemented by the function :py:func:`create_pipeline_time_series_to_spectral_connectivity <neuropype_ephy.pipelines.ts_to_conmat.create_pipeline_time_series_to_spectral_connectivity>`
and its Nodes :py:class:`spectral <neuropype_ephy.interfaces.mne.spectral.SpectralConn>` and
:py:class:`plot_spectral <neuropype_ephy.interfaces.mne.spectral.PlotSpectralConn>`
wraps the MNE Python functions  |spectral_connectivity|, |plot_connectivity_circle| respectively.

.. |spectral_connectivity| raw:: html

   <a href="http://martinos.org/mne/stable/generated/mne.connectivity.spectral_connectivity.html?highlight=spectral_connectivity#mne.connectivity.spectral_connectivity" target="_blank">spectral_connectivity</a>


   
.. figure::  ../../img/graph_dot_conn.jpg
   :scale: 75 %
   :align: center
   

.. seealso:: See :ref:`conn_graph_example` to get an example on how to write a connectivity and graph analysis workflow.
